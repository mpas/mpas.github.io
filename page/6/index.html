<!DOCTYPE html>
<html lang="en-US">
<head>
  
  
  <meta charset="utf-8">
  <title>CodeVerse - CodeVerse</title>
  <meta name="description" content="">
  <meta name="author" content="Marco Pas">

  <meta name="generator" content="" />
  <meta name="robots" content="index,follow">

  
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  
  
  <link rel="stylesheet" href="/skeleton/normalize.css">
  <link rel="stylesheet" href="/skeleton/skeleton.css">
  
  
  <link rel="stylesheet" href="/fontawesome/all.min.css">
 
  
  <script src="/prism/prism.js"></script>
  <link rel="stylesheet" href="/prism/prism.css">
  
  
  <link rel="stylesheet" href="/css/custom.css">
  
  
  <link rel="icon" type="image/png" href="/images/favicon.png">

</head>

<div class="container">
    <div id="header">
        <div class="row">
            <div class="six columns">
                <div id="brand">
                    <a href="http://mpas.github.io">CodeVerse</a>
                </div>
            </div>
            <div class="six columns">
                <nav class="u-pull-right">
                    <ul id="navbar">
                        
                        
                            <li class="current">
                                <a href="/">Blog</a></li>
                        
                            <li >
                                <a href="/posts">Post List</a></li>
                        
                            <li >
                                <a href="/pages/about/">About Me</a></li>
                        
                            <li >
                                <a href="/pages/resume">Resume</a></li>
                        
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>


<div class="container">
    <div class="row">
        <div class="post-list">
            
            
                
                <article class="post u-cf">
    <div class="row">
        <div class="twelve columns">
            <h1 class="post-title">Simple Helloworld verticle</h1>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <p>Sourcecode:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">helloworld</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.vertx.java.core.Handler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.vertx.java.core.http.HttpServerRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.vertx.java.deploy.Verticle</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Server</span> <span class="kd">extends</span> <span class="n">Verticle</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">vertx</span><span class="o">.</span><span class="na">createHttpServer</span><span class="o">().</span><span class="na">requestHandler</span><span class="o">(</span><span class="k">new</span> <span class="n">Handler</span><span class="o">&lt;</span><span class="n">HttpServerRequest</span><span class="o">&gt;()</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">(</span><span class="n">HttpServerRequest</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">req</span><span class="o">.</span><span class="na">response</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;Content-Type&#34;</span><span class="o">,</span> <span class="s">&#34;text/html; charset-UTF-8&#34;</span><span class="o">);</span>
            <span class="n">req</span><span class="o">.</span><span class="na">response</span><span class="o">.</span><span class="na">end</span><span class="o">(</span><span class="s">&#34;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello from vert.x!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&#34;</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}).</span><span class="na">listen</span><span class="o">(</span><span class="n">8080</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <div class="post-meta-info">
                Published on 2013-05-16
                <span class="post-meta-info-taxonomy">
                    using tags:
                        <a href="/tags/java">java</a>, <a href="/tags/vertx">vertx</a>
                </span>
            </div>
        </div>
    </div>
</article>

            
                <article class="post u-cf">
    <div class="row">
        <div class="twelve columns">
            <h1 class="post-title">Grails migrations and &#39;Waiting for changelog lock&#39;</h1>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <p>Sometimes it may happen that the automatic migrations in a Grails project may come to a hold due to the fact that Liquibase keeps waiting for a changelog lock. At the end this will result in a application that is not going to be deployed.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">...
Waiting for changelog lock....
Waiting for changelog lock....
Waiting for changelog lock....
...
</code></pre></div><p>To solve this take the following steps:</p>
<ul>
<li>Stop the application container (example: Tomcat)</li>
<li>In the database look for a table called <code>DATABASECHANGELOGLOCK</code></li>
<li>In the table there is a record with id=1, change the following values:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">locked -&gt; 0
lockgranted -&gt; null
lockedby -&gt; null
</code></pre></div><ul>
<li>After updating this record start the application container</li>
</ul>
<p><strong>Notes:</strong><br>
To see who has locked the database (normally the local machine):</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">DATABASECHANGELOGLOCK</span><span class="p">;</span>
<span class="k">To</span> <span class="k">update</span> <span class="n">the</span> <span class="n">record</span>
<span class="k">update</span> <span class="n">DATABASECHANGELOGLOCK</span>
<span class="k">set</span> <span class="n">locked</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">lockgranted</span><span class="o">=</span><span class="k">null</span><span class="p">,</span> <span class="n">lockedby</span><span class="o">=</span><span class="k">null</span>
<span class="k">where</span> <span class="n">id</span><span class="o">=</span><span class="mi">1</span>
</code></pre></div>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <div class="post-meta-info">
                Published on 2013-02-28
                <span class="post-meta-info-taxonomy">
                    using tags:
                        <a href="/tags/grails">grails</a>, <a href="/tags/migrations">migrations</a>
                </span>
            </div>
        </div>
    </div>
</article>

            
                <article class="post u-cf">
    <div class="row">
        <div class="twelve columns">
            <h1 class="post-title">Testing constraints with Build Test Data</h1>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <p>The <a href="http://grails.org/plugin/spock">Spock</a> &amp; <a href="http://grails.org/plugin/build-test-data">Build Test Data</a> plugins both are wonderful additions to your toolkit if you are creating tests without getting into the hassle of constantly building up your object graph. You can focus on what you want to test!</p>
<p>When testing constraints on an object it can be used as follows:</p>
<div class="highlight"><pre class="chroma"><code class="language-groovy" data-lang="groovy"><span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">name</span>   <span class="c1">// name of foo
</span><span class="c1"></span>    <span class="n">Integer</span> <span class="n">age</span>   <span class="c1">// age of foo
</span><span class="c1"></span>
    <span class="kd">static</span> <span class="n">constraints</span> <span class="o">=</span> <span class="o">{</span>
        <span class="n">name</span> <span class="nl">nullable:</span> <span class="kc">false</span><span class="o">,</span> <span class="nl">blank:</span> <span class="kc">false</span> <span class="c1">// name may never be nullable or blank
</span><span class="c1"></span>        <span class="n">age</span> <span class="nl">nullable:</span> <span class="kc">true</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>And the Spock test</p>
<div class="highlight"><pre class="chroma"><code class="language-groovy" data-lang="groovy"><span class="nd">@Build</span><span class="o">(</span><span class="n">Foo</span><span class="o">)</span>
<span class="nd">@TestFor</span><span class="o">(</span><span class="n">Foo</span><span class="o">)</span>
<span class="kd">class</span> <span class="nc">FooSpec</span> <span class="kd">extends</span> <span class="n">Specification</span> <span class="o">{</span>

    <span class="kt">def</span> <span class="s2">&#34;Name of Foo must exist&#34;</span><span class="o">()</span> <span class="o">{</span>
        <span class="nl">given:</span> <span class="s2">&#34;setting up the constraints&#34;</span>
        <span class="n">mockForConstraintsTests</span><span class="o">(</span><span class="n">Foo</span><span class="o">)</span>

        <span class="nl">when:</span> <span class="s2">&#34;creating a Foo&#34;</span>
        <span class="n">Foo</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="o">.</span><span class="na">buildWithoutSave</span><span class="o">()</span>

        <span class="nl">then:</span> <span class="s2">&#34;validation should trigger&#34;</span>
        <span class="n">assertFalse</span> <span class="n">foo</span><span class="o">.</span><span class="na">validate</span><span class="o">()</span>

        <span class="nl">and:</span> <span class="s2">&#34;validation error should be on the value field&#34;</span>
        <span class="k">assert</span> <span class="n">foo</span><span class="o">.</span><span class="na">errors</span><span class="o">.</span><span class="na">allErrors</span><span class="o">.</span><span class="na">first</span><span class="o">().</span><span class="na">field</span> <span class="o">==</span> <span class="s2">&#34;name&#34;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <div class="post-meta-info">
                Published on 2013-01-13
                <span class="post-meta-info-taxonomy">
                    using tags:
                        <a href="/tags/build">build</a>, <a href="/tags/testdata">testdata</a>, <a href="/tags/grails">grails</a>, <a href="/tags/spock">spock</a>, <a href="/tags/test">test</a>
                </span>
            </div>
        </div>
    </div>
</article>

            
                <article class="post u-cf">
    <div class="row">
        <div class="twelve columns">
            <h1 class="post-title">Getting the Enum from a String value</h1>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <p>Ever asked yourself the question how you could get the Enum from a String value? This is particularly usefull when you use Enum values in your screens and pass back the value of the enum!</p>
<div class="highlight"><pre class="chroma"><code class="language-groovy" data-lang="groovy"><span class="n">Enum</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">YourClassName</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s2">&#34;String Value&#34;</span><span class="o">)</span>
</code></pre></div><p><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html">http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html</a></p>

        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <div class="post-meta-info">
                Published on 2013-01-03
                <span class="post-meta-info-taxonomy">
                    using tags:
                        <a href="/tags/enum">enum</a>, <a href="/tags/java">java</a>
                </span>
            </div>
        </div>
    </div>
</article>

            
                <article class="post u-cf">
    <div class="row">
        <div class="twelve columns">
            <h1 class="post-title">Troubles getting vsftpd user logged in?</h1>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <p>Recently i had the pleasure of installing and using vsftp on a Ubuntu Linux 12.04 system. I closely followed the instructions but keeped getting my head banging against a wall with an error message:
500 OOPS: vsftpd: refusing to run with writable root inside chroot()</p>
<p>After some googling around i found the following fix..
chmod the folder that the ftp user comes in to as he first login (root folder) by using in terminal:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo chmod a-w /home/user
</code></pre></div><p>Create a subfolder within the folder, either by the use of GUI or if you only have terminal it&rsquo;s:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo mkdir /home/user/newfolder
</code></pre></div><p>Now you should be able to log in and read write within the &ldquo;newfolder&rdquo;.</p>
<p>You will <strong>NOT</strong> be able to write in the root folder itself from the ftp with the chmod a-w, so that is the reason for the subfolder, there you can.</p>
<p><a href="http://askubuntu.com/questions/128180/vsftpd-stopped-working-after-update">http://askubuntu.com/questions/128180/vsftpd-stopped-working-after-update</a></p>

        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <div class="post-meta-info">
                Published on 2012-09-18
                <span class="post-meta-info-taxonomy">
                    using tags:
                        <a href="/tags/ftps">ftps</a>, <a href="/tags/linux">linux</a>, <a href="/tags/ubuntu">ubuntu</a>, <a href="/tags/vsftpd">vsftpd</a>
                </span>
            </div>
        </div>
    </div>
</article>

            
        </div>
    </div>
</div>


<div class="container">
    <div class="row">
        <div class="twelve columns">
        
            <ul class="pager">
            
                <li>
                <a class="button" href="http://mpas.github.io/page/5">&larr; Newer Posts</a>
                </li>
            
            
                <li>
                <a class="button" href="http://mpas.github.io/page/7">Older Posts &rarr;</a>
                </li>
            
            </ul>
        
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="twelve columns">
                <div id="social">
                    
                        <a title="Twitter" href="https://twitter.com/marcopas">
                            <i class="fab fa-twitter"></i>
                        </a>
                    
                    
                        <a title="LinkedIn" href="https://www.linkedin.com/in/marcopas">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    
                    
                        <a title="GitHub" href="https://github.com/mpas">
                            <i class="fab fa-github"></i>
                        </a>
                    
                    
                        <a title="StackOverflow" href="http://stackoverflow.com/users/185432/marco">
                            <i class="fab fa-stack-overflow"></i>
                        </a>
                    
                    
                        <a title="Email" href="mailto:marco.pasopas@gmail.com">
                            <i class="far fa-envelope"></i>
                        </a>
                    
            </div>
        </div>

        <div class="row">
            <div class="twelve columns" id="copyright">&copy; 2020 ~ CodeVerse / Powered by <a href="http://gohugo.io/">Hugo</div>
        </div>
    </div>
</footer>
</body>
</html>

