<!DOCTYPE html>
<html lang="en-US">
<head>
  
  
  <meta charset="utf-8">
  <title>CodeVerse - Combining ImageMagick and Grails</title>
  <meta name="description" content="">
  <meta name="author" content="Marco Pas">

  <meta name="generator" content="" />
  <meta name="robots" content="index,follow">

  
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  
  
  <link rel="stylesheet" href="/skeleton/normalize.css">
  <link rel="stylesheet" href="/skeleton/skeleton.css">
  
  
  <link rel="stylesheet" href="/fontawesome/all.min.css">
 
  
  <script src="/prism/prism.js"></script>
  <link rel="stylesheet" href="/prism/prism.css">
  
  
  <link rel="stylesheet" href="/css/custom.css">
  
  
  <link rel="icon" type="image/png" href="/images/favicon.png">

</head>

<div class="container">
    <div id="header">
        <div class="row">
            <div class="six columns">
                <div id="brand">
                    <a href="http://mpas.github.io">CodeVerse</a>
                </div>
            </div>
            <div class="six columns">
                <nav class="u-pull-right">
                    <ul id="navbar">
                        
                        
                            <li >
                                <a href="/">Blog</a></li>
                        
                            <li >
                                <a href="/posts">Post List</a></li>
                        
                            <li >
                                <a href="/pages/about/">About Me</a></li>
                        
                            <li >
                                <a href="/pages/resume">Resume</a></li>
                        
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>



  <div class="container">
    <div class="row">
      <div class="post-content">
        <article class="post u-cf">
    <div class="row">
        <div class="twelve columns">
            <h1 class="post-title">Combining ImageMagick and Grails</h1>
        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <p>When there is a need to work with images (thumbnailing, watermark, resize etc.) there is always ImageMagick that comes to the rescue. Combining this image utility powerhouse with the Grails framework is a task which can be easily accomplished.</p>
<p><strong>Steps:</strong></p>
<ul>
<li>Install ImageMagick according to the installation instructions.</li>
<li>It contains a utility called convert which we will need later on! This utility takes care of the conversion of images to thumbnails, watermarks etc. So remember where this utility is installed on your system!</li>
<li>Make sure that ImageMagick is installed correctly be converting an image to a thumbnail by using the following command in a terminal.</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">/opt/local/bin/convert &lt;filename&gt; -thumbnail 70x70 &lt;thumbnail-filename&gt;
</code></pre></div><p><strong>example:</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">/opt/local/bin/convert /tmp/image-001.jpg -thumbnail 70x70 /tmp/thumbnail-image-001.jpg
</code></pre></div><p>Create some code that calls the ImageMagick convert utility with the correct parameters to enable you to achieve what you want. Something like below:</p>
<div class="highlight"><pre class="chroma"><code class="language-groovy" data-lang="groovy"><span class="kt">def</span> <span class="nf">createThumbnail</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
   <span class="kt">def</span> <span class="n">command</span> <span class="o">=</span> <span class="s2">&#34;/opt/local/bin/convert ${file.canonicalPath} &#34;</span> <span class="o">+</span>
                 <span class="s2">&#34;-thumbnail 70x70 &#34;</span> <span class="o">+</span>
                 <span class="s2">&#34;/images/thumbs&#34;</span> <span class="o">+</span> <span class="n">File</span><span class="o">.</span><span class="na">separator</span> <span class="o">+</span> <span class="s2">&#34;${file.name}&#34;</span>
   <span class="kt">def</span> <span class="n">proc</span> <span class="o">=</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">exec</span><span class="o">(</span><span class="n">command</span><span class="o">)</span>
   <span class="kt">int</span> <span class="n">exitStatus</span><span class="o">;</span>
   <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
       <span class="k">try</span> <span class="o">{</span>
           <span class="n">exitStatus</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="na">waitFor</span><span class="o">();</span>
           <span class="k">break</span><span class="o">;</span>
       <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
           <span class="n">log</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s2">&#34;Creating thumbnail - Interrupted: Ignoring and waiting&#34;</span><span class="o">)</span>
       <span class="o">}</span>
   <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">exitStatus</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s2">&#34;Error executing command: exitStatus=[${exitStatus}]&#34;</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="n">log</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s2">&#34;Succesfully created thumbnail&#34;</span><span class="o">)</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">exitStatus</span> <span class="o">==</span> <span class="mi">0</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div><p>The above should give you some idea on how you could integrate Grails and ImageMagick into your own application.</p>

        </div>
    </div>
    <div class="row">
        <div class="twelve columns">
            <div class="post-meta-info">
                Published on 2012-09-15
                <span class="post-meta-info-taxonomy">
                    using tags:
                        <a href="/tags/grails">grails</a>, <a href="/tags/imagemagick">imagemagick</a>
                </span>
            </div>
        </div>
    </div>
</article>

      </div>
    </div>
  </div>

<footer>
    <div class="container">
        <div class="row">
            <div class="twelve columns">
                <div id="social">
                    
                        <a title="Twitter" href="https://twitter.com/marcopas">
                            <i class="fab fa-twitter"></i>
                        </a>
                    
                    
                        <a title="LinkedIn" href="https://www.linkedin.com/in/marcopas">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    
                    
                        <a title="GitHub" href="https://github.com/mpas">
                            <i class="fab fa-github"></i>
                        </a>
                    
                    
                        <a title="StackOverflow" href="http://stackoverflow.com/users/185432/marco">
                            <i class="fab fa-stack-overflow"></i>
                        </a>
                    
                    
                        <a title="Email" href="mailto:marco.pasopas@gmail.com">
                            <i class="far fa-envelope"></i>
                        </a>
                    
            </div>
        </div>

        <div class="row">
            <div class="twelve columns" id="copyright">&copy; 2020 ~ CodeVerse / Powered by <a href="http://gohugo.io/">Hugo</div>
        </div>
    </div>
</footer>
</body>
</html>

